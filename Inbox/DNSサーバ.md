```
:set number
```

この文書には、BINDを使用してLinuxまたはUNIXシステムでDNSサーバーを設定するための手順が記載されています。文書に従って、次のように進めることができます。

1.  BINDとbind-utilsをyumコマンドを使用して新規インストールします。
2.  /etc/named.confファイルを作成します。この文書の3-1に記載されている内容を参照して作成できます。
3.  /var/namedディレクトリに正引きファイルと逆引きファイルを作成します。この文書の3-2と3-3に記載されている内容を参照して作成できます。
4.  namedサービスを起動します。
5.  DNSサーバーの設定を変更して、namedサービスが動作する127.0.0.1を使用するようにします。
6.  digやnslookupコマンドを使用して、名前解決ができるか確認します。
7.  systemctlコマンドを使用して、OS起動時にnamedサービスが起動するよう設定します。

これらの手順に従って進めることができます。何か質問や困ったことがあれば、お気軽にお問い合わせください。


1.
```
su root
```
```
yum -y remove bind bind-utils bind-chroot
```
```
yum -y install bind bind-utils
```
```
ls -l /etc/named.conf
```
```
cd ../..
```

2.
LinuxまたはUNIXシステムでは、テキストエディタを使用して設定ファイルを編集することができます。一般的なテキストエディタには、`vi`、`nano`、`emacs`などがあります。

例えば、`vi`エディタを使用して`/etc/named.conf`ファイルを編集するには、次のコマンドを実行します。

```
vi /etc/named.conf
```


コピー

このコマンドを実行すると、`vi`エディタが起動し、`/etc/named.conf`ファイルが開かれます。`vi`エディタの基本的な操作方法は次のとおりです。

-   ファイルの内容を移動するには、矢印キーまたは`h`、`j`、`k`、`l`キーを使用します。
-   ファイルの内容を編集するには、`i`キーを押して挿入モードに切り替えます。挿入モードでは、通常のテキスト入力ができます。
-   編集を終了するには、`Esc`キーを押してコマンドモードに戻ります。
-   ファイルの変更内容を保存するには、コマンドモードで`:w`と入力してEnterキーを押します。
-   `vi`エディタを終了するには、コマンドモードで`:q`と入力してEnterキーを押します。変更内容が保存されていない場合、`:q!`と入力することで強制終了することができます。

これらが基本的な操作方法です。もし他のテキストエディタを使用したい場合や詳しい操作方法が知りたい場合はお知らせください。



3.
`/var/named`ディレクトリに正引きファイルと逆引きファイルを作成することが説明されています。

正引きファイルは、ドメイン名からIPアドレスを検索するためのファイルです。逆引きファイルは、IPアドレスからドメイン名を検索するためのファイルです。

この文書では、正引きファイルの名前は`mr.hi-joho.ac.jp.zone`、逆引きファイルの名前は`xx.16.10.rev`としています。ただし、`xx`は教室によって異なるため、適切な値に置き換える必要があります。

正引きファイルと逆引きファイルは、テキストエディタを使用して作成することができます。例えば、`vi`エディタを使用して正引きファイルを作成するには、次のコマンドを実行します。

```
vi /var/named/mr.hi-joho.ac.jp.zone
```

コピー

このコマンドを実行すると、`vi`エディタが起動し、新しいファイルが開かれます。この文書の3-2に記載されている内容を参照して、正引きファイルの内容を入力します。

逆引きファイルも同様に作成することができます。ただし、ファイル名は適切な値に置き換える必要があります。

```
vi /var/named/73.16.10.rev
```

コピー

この文書の3-3に記載されている内容を参照して、逆引きファイルの内容を入力します。

以上が、正引きファイルと逆引きファイルの作成方法です。何か質問や困ったことがあればお気軽にお問い合わせください。

各ゾーンファイルのチェック
```
named-checkzone mr.hi-joho.ac.jp /var/named/mr.hi-joho.ac.jp.zone
```

```
named-checkzone 73.16.10.in-addr.arpa /var/named/73.16.10.rev
```

6 設定ファイルのアクセス権、所有者、所有グループの変更
「所有者」と「グループ」を所有者root:グループnamedに変更する。
```
chown root:named /var/named/mr.hi-joho.ac.jp.zone
```
```
chown root:named /var/named/73.16.10.rev
```
rootのみが読み書きでき、グループnamedは読み込みのみ、その他のユーザはアクセス不可にする
```
chmod 640 /var/named/mr.hi-joho.ac.jp.zone
```
```
chmod 640 /var/named/73.16.10.rev
```

7
```
systemctl start named
```
```
systemctl enable named
```

8
```
nmtui
```
![[Pasted image 20230525115822.png]]

各ゾーンファイルのチェック
```
named-checkzone mr105.hi-joho.ac.jp /var/named/mr105.hi-joho.ac.jp.zone
```

```
named-checkzone 73.16.10.in-addr.arpa /var/named/73.16.10.rev
```

講師チェック
チェックA
```
nslookup r4a105.mr105.hi-joho.ac.jp
nslookup r4a105.mr.hi-joho.ac.jp
nslookup www.mr.hi-joho.ac.jp
nslookup 10.16.73.105
nslookup 10.16.111.105
```